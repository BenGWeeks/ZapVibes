"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i="__FUIDT_CONTROLLER__",s="__FUIDT_ELEMENT_METADATA__",c="__FUIDT_HTML_ELEMENT_REFERENCE__",d=()=>{let e=null;const n={get selectedElement(){return e},select:r=>(u(r)&&(e=r,o.observe(r.parentElement,{childList:!0,subtree:!1})),e&&r&&f(e,r)||n.withdraw(),e),withdraw:()=>{e=null,o.disconnect()}},o=new MutationObserver(r=>{if(e)for(const t of r)t.type==="childList"&&Array.from(t.removedNodes).includes(e)&&n.withdraw()});return n},l=e=>{e.defaultView&&(e.defaultView[i]||(e.defaultView[i]=d()))},f=(e,n)=>{const o=e[s];switch(o.type){case"middleware":return o.references.has(n);default:return!1}},u=e=>!!(e&&s in e&&e.parentElement!==null);function E(e,n){var r;const o=e;return!!((r=o==null?void 0:o.ownerDocument)!=null&&r.defaultView&&o instanceof o.ownerDocument.defaultView[(n==null?void 0:n.constructorName)??"HTMLElement"])}const w=()=>`${c}:${crypto.randomUUID()}`,_=()=>{const e=new WeakSet,n=new Map;return{add:r=>{const t=w();return n.set(t,r),e.add(r),t},get:r=>{const t=n.get(r);if(t&&e.has(t))return t},has:r=>e.has(r)}},T=e=>{const n=_();return[JSON.parse(JSON.stringify(e,(r,t)=>E(t)?n.add(t):typeof t=="object"&&t&&Object.getPrototypeOf(t)!==Object.prototype&&Object.getPrototypeOf(t)!==Array.prototype?"toString"in t?t.toString():void 0:t)),n]},a=(e,n=M)=>({name:"@floating-ui/devtools",fn:o=>{l(e);const[r,t]=T(n(o));return Object.assign(o.elements.floating,{[s]:{references:t,serializedData:r,type:"middleware"}}),{}}}),M=e=>({...e,type:"FloatingUIMiddleware"});exports.devtools=a;exports.middleware=a;
