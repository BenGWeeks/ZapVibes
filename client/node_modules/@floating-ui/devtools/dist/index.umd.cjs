(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i.FloatingUIDevtools={}))})(this,function(i){"use strict";const s="__FUIDT_CONTROLLER__",a="__FUIDT_ELEMENT_METADATA__",d="__FUIDT_HTML_ELEMENT_REFERENCE__",f=()=>{let e=null;const n={get selectedElement(){return e},select:r=>(E(r)&&(e=r,o.observe(r.parentElement,{childList:!0,subtree:!1})),e&&r&&u(e,r)||n.withdraw(),e),withdraw:()=>{e=null,o.disconnect()}},o=new MutationObserver(r=>{if(e)for(const t of r)t.type==="childList"&&Array.from(t.removedNodes).includes(e)&&n.withdraw()});return n},l=e=>{e.defaultView&&(e.defaultView[s]||(e.defaultView[s]=f()))},u=(e,n)=>{const o=e[a];switch(o.type){case"middleware":return o.references.has(n);default:return!1}},E=e=>!!(e&&a in e&&e.parentElement!==null);function w(e,n){var r;const o=e;return!!((r=o==null?void 0:o.ownerDocument)!=null&&r.defaultView&&o instanceof o.ownerDocument.defaultView[(n==null?void 0:n.constructorName)??"HTMLElement"])}const _=()=>`${d}:${crypto.randomUUID()}`,T=()=>{const e=new WeakSet,n=new Map;return{add:r=>{const t=_();return n.set(t,r),e.add(r),t},get:r=>{const t=n.get(r);if(t&&e.has(t))return t},has:r=>e.has(r)}},p=e=>{const n=T();return[JSON.parse(JSON.stringify(e,(r,t)=>w(t)?n.add(t):typeof t=="object"&&t&&Object.getPrototypeOf(t)!==Object.prototype&&Object.getPrototypeOf(t)!==Array.prototype?"toString"in t?t.toString():void 0:t)),n]},c=(e,n=M)=>({name:"@floating-ui/devtools",fn:o=>{l(e);const[r,t]=p(n(o));return Object.assign(o.elements.floating,{[a]:{references:t,serializedData:r,type:"middleware"}}),{}}}),M=e=>({...e,type:"FloatingUIMiddleware"});i.devtools=c,i.middleware=c,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
